{#TODO create template for geo_snapshot#}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Geographic Area Metrics</title>
    <link rel="stylesheet" media="all" href="http://lakeforestschools.org/uploaded/themes/default_16/css/main.css?1541690790">
    <link rel="stylesheet" href="http://127.0.0.1:5000/static/scorecards.css">
</head>
<body>

<H1><A HREF="/snapshot/{{ snap.district_id }}">&lt;</A>  Regional Condition Metrics</H1>

<TABLE>
    <TR>
        <TH>Regional Condition Status</TH><TD class="{{ snap.status }}">{{ snap.status }}</TD>
    </TR>
    <TR>
        <TH>&nbsp;&nbsp;Zip Code Status</TH><TD class="{{ snap.zip_data.status }}">{{ snap.zip_data.status }}</TD>
    </TR>
    <TR>
        <TH>&nbsp;&nbsp;County Status</TH><TD class="{{ snap.county_data.status }}">{{ snap.county_data.status }}</TD>
    </TR>
    <TR>
        <TH>&nbsp;&nbsp;Region Status</TH><TD class="{{ snap.region_data.status }}">{{ snap.region_data.status }}</TD>
    </TR>
</TABLE>

<BR>
<HR>

<TABLE>
    <TR>
        <TH colspan="2">New Cases in Zip Code</TH>
    </TR>
    <TR>
        <TH>Description</TH><TD>For zip codes areas, the new case count should be less than 8 per 10,000 residents.</TD>
    </TR>
    <TR>
        <TH>Updates</TH><TD>Updated daily, last update on {{ snap.zip_data.update_date }}</TD>
    </TR>
    <TR>
        <TD colspan="2">
            <TABLE>
                <TR>
                    <TH>Zip Code</TH><TH>Population</TH><TH>New Case Count</TH><TH>Count per 10,000 residents</TH><TH>Status</TH>
                </TR>
                {% for r in snap.zip_data.zip_codes %}
                <TR>
                    <TD>{{ r.zip_code }}</TD><TD>{{ r.population }}</TD><TD>{{ r.new_cases }}</TD><TD>{{ '%0.2f'| format(r.cases_per_10k) }}</TD><TD class="{{ r.status }}">{{ r.status }}</TD>
                </TR>
                {% endfor %}
            </TABLE>
        </TD>
    </TR>
</TABLE>

<BR>
<HR>

<TABLE>
    <TR>
        <TH colspan="2">Positivity Rate in County</TH>
    </TR>
    <TR>
        <TH>Description</TH><TD>For counties, the positivity testing rate should be less than or equal to 8% according to data provided by <A HREF="https://www.dph.illinois.gov/countymetrics">IDPH</A>.</TD>
    </TR>
    <TR>
        <TH>Updates</TH><TD>Updated daily, last update on {{ snap.county_data.update_date }}</TD>
    </TR>
    <TR>
        <TD colspan="2">
            <TABLE>
                <TR>
                    <TH>County</TH><TH>Tests</TH><TH>Positive Tests</TH><TH>Positivity Rate</TH><TH>Status</TH>
                </TR>
                {% for r in snap.county_data.counties %}
                <TR>
                    <TD>{{ r.county }}</TD><TD>{{ r.total_tests }}</TD><TD>{{ r.positive_tests }}</TD><TD>{{ '%0.2f'| format(r.positivity_rate*100) }}%</TD><TD class="{{ r.status }}">{{ r.status }}</TD>
                </TR>
                {% endfor %}
            </TABLE>
        </TD>
    </TR>
</TABLE>

<BR>
<HR>

<TABLE>
    <TR>
        <TH colspan="2">Positivity Rate in Region</TH>
    </TR>
    <TR>
        <TH>Description</TH><TD>For COVID regions, the positivity testing rate should be less than or equal to 8% for three days according to data provided by <A HREF="https://www.dph.illinois.gov/regionmetrics?regionID=9">IDPH</A>.</TD>
    </TR>
    <TR>
        <TH>Updates</TH><TD>Updated daily, last update on {{ snap.region_data.update_date }}</TD>
    </TR>
    <TR>
        <TD colspan="2">
            <TABLE>
                <TR>
                    <TH>Region</TH><TH>Tests</TH><TH>Positive Tests</TH><TH>Positivity Rate</TH><TH>Status</TH>
                </TR>
                {% for r in snap.region_data.regions %}
                <TR>
                    <TD>{{ r.region }}</TD><TD>{{ r.total_tests }}</TD><TD>{{ r.positive_tests }}</TD><TD>{{ '%0.2f'| format(r.positivity_rate*100) }}%</TD><TD class="{{ r.status }}">{{ r.status }}</TD>
                </TR>
                {% endfor %}
            </TABLE>
        </TD>
    </TR>
</TABLE>

</body>
</html>